CREATE TABLE cgroup (id INT AUTO_INCREMENT, name VARCHAR(120) NOT NULL, description VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE customer_group (ckode_customer VARCHAR(11), group_id INT, PRIMARY KEY(ckode_customer, group_id)) ENGINE = INNODB;
CREATE TABLE edupedia_location (id BIGINT AUTO_INCREMENT, name VARCHAR(255), root_id BIGINT, lft INT, rgt INT, level SMALLINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tbl_bidangusaha (ckode_usaha VARCHAR(6), cketerangan VARCHAR(50) NOT NULL, cdetail VARCHAR(1) DEFAULT 'F' NOT NULL, ctransfer VARCHAR(1) DEFAULT 'N' NOT NULL, PRIMARY KEY(ckode_usaha)) ENGINE = INNODB;
CREATE TABLE tbl_customer (ckode_customer VARCHAR(11), ckode_sales VARCHAR(9) NOT NULL, ckode_loket VARCHAR(3) NOT NULL, ckode_usaha VARCHAR(6) NOT NULL, ckode_pos VARCHAR(5) NOT NULL, lokasi_id BIGINT NOT NULL, cnama VARCHAR(100), cnama_singkat VARCHAR(50), calamat VARCHAR(100), calamat_tagih VARCHAR(100), dtgl_masuk DATETIME, cattn VARCHAR(20), ctelepon VARCHAR(20), cnpwp VARCHAR(20), nterm INT, cstatus VARCHAR(1) DEFAULT 'A' NOT NULL, takakura_pinjaman INT, takakura_uang_jaminan DECIMAL(10, 2), tong_sampah_pinjaman INT, tong_sampah_uang_jaminan DECIMAL(10, 2), ctelepon2 VARCHAR(20), ctransfer VARCHAR(1) DEFAULT 'N' NOT NULL, ccetak_harga VARCHAR(1) DEFAULT 'F' NOT NULL, cpayment VARCHAR(1) DEFAULT 'K' NOT NULL, INDEX ckode_sales_idx (ckode_sales), INDEX lokasi_id_idx (lokasi_id), INDEX ckode_loket_idx (ckode_loket), INDEX ckode_pos_idx (ckode_pos), INDEX ckode_usaha_idx (ckode_usaha), INDEX cpayment_idx (cpayment), INDEX cstatus_idx (cstatus), PRIMARY KEY(ckode_customer)) ENGINE = INNODB;
CREATE TABLE tbl_jenisbayar (ckode_jenisbayar VARCHAR(1), cketerangan VARCHAR(20), PRIMARY KEY(ckode_jenisbayar)) ENGINE = INNODB;
CREATE TABLE tbl_loket (ckode_loket VARCHAR(3), cketerangan VARCHAR(50), delivery_address VARCHAR(255) NOT NULL, phone VARCHAR(30) NOT NULL, phone2 VARCHAR(30) NOT NULL, fax VARCHAR(30) NOT NULL, email VARCHAR(100) NOT NULL, contact VARCHAR(10) NOT NULL, inactive TINYINT NOT NULL, PRIMARY KEY(ckode_loket)) ENGINE = INNODB;
CREATE TABLE tbl_sales (ckode_sales VARCHAR(9), ckode_loket VARCHAR(3) NOT NULL, cnama VARCHAR(30), ctransfer VARCHAR(1) DEFAULT 'N' NOT NULL, calamat VARCHAR(100), cstatus VARCHAR(1) DEFAULT 'A' NOT NULL, INDEX ckode_loket_idx (ckode_loket), PRIMARY KEY(ckode_sales)) ENGINE = INNODB;
CREATE TABLE tbl_statuscust (ckode_statuscust VARCHAR(1), cketerangan VARCHAR(10), PRIMARY KEY(ckode_statuscust)) ENGINE = INNODB;
CREATE TABLE tbl_wilayah (ckodepos VARCHAR(5), cketerangan TEXT, latitude FLOAT(18, 2) NOT NULL, longitude FLOAT(18, 2) NOT NULL, ctransfer VARCHAR(1) DEFAULT 'N' NOT NULL, PRIMARY KEY(ckodepos)) ENGINE = INNODB;
ALTER TABLE customer_group ADD CONSTRAINT customer_group_group_id_cgroup_id FOREIGN KEY (group_id) REFERENCES cgroup(id);
ALTER TABLE customer_group ADD CONSTRAINT customer_group_ckode_customer_tbl_customer_ckode_customer FOREIGN KEY (ckode_customer) REFERENCES tbl_customer(ckode_customer);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_lokasi_id_edupedia_location_id FOREIGN KEY (lokasi_id) REFERENCES edupedia_location(id);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_cstatus_tbl_statuscust_ckode_statuscust FOREIGN KEY (cstatus) REFERENCES tbl_statuscust(ckode_statuscust);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_cpayment_tbl_jenisbayar_ckode_jenisbayar FOREIGN KEY (cpayment) REFERENCES tbl_jenisbayar(ckode_jenisbayar);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_ckode_usaha_tbl_bidangusaha_ckode_usaha FOREIGN KEY (ckode_usaha) REFERENCES tbl_bidangusaha(ckode_usaha);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_ckode_sales_tbl_sales_ckode_sales FOREIGN KEY (ckode_sales) REFERENCES tbl_sales(ckode_sales);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_ckode_pos_tbl_wilayah_ckodepos FOREIGN KEY (ckode_pos) REFERENCES tbl_wilayah(ckodepos);
ALTER TABLE tbl_customer ADD CONSTRAINT tbl_customer_ckode_loket_tbl_loket_ckode_loket FOREIGN KEY (ckode_loket) REFERENCES tbl_loket(ckode_loket);
ALTER TABLE tbl_sales ADD CONSTRAINT tbl_sales_ckode_loket_tbl_loket_ckode_loket FOREIGN KEY (ckode_loket) REFERENCES tbl_loket(ckode_loket);
